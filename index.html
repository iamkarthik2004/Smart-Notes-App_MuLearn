<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Smart Notes App</title>

  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <div class="container">
    <h1>üìù Smart Notes App</h1>

    <div class="note-input">
      <input type="text" id="titleInput" placeholder="Note title" />
      <textarea id="contentInput" placeholder="Write your note..."></textarea>
      <button onclick="addNote()">Add Note</button>
    </div>

    <div class="notes" id="notesContainer"></div>
  </div>

  <script>
    let notes = JSON.parse(localStorage.getItem("notes")) || [];

    function saveNotes() {
      localStorage.setItem("notes", JSON.stringify(notes));
    }

    function displayNotes() {
      const container = document.getElementById("notesContainer");
      container.innerHTML = "";

      notes.forEach((note, index) => {
        container.innerHTML += `
          <div class="note-card">
            <h3>${note.title || "Untitled Note"}</h3>
            <p>${note.content}</p>
            <div class="note-actions">
              <button class="edit" onclick="editNote(${index})">Edit</button>
              <button class="delete" onclick="deleteNote(${index})">Delete</button>
              <button class="download" onclick="downloadNote(${index})">Download</button>
            </div>
          </div>
        `;
      });
    }

    function addNote() {
      const title = titleInput.value.trim();
      const content = contentInput.value.trim();

      if (!content) {
        alert("Note content cannot be empty!");
        return;
      }

      notes.push({
        title: title,
        content: content,
        date: new Date().toISOString().slice(0, 10)
      });

      saveNotes();
      displayNotes();

      titleInput.value = "";
      contentInput.value = "";
    }

    function deleteNote(index) {
      notes.splice(index, 1);
      saveNotes();
      displayNotes();
    }

    function editNote(index) {
      const newTitle = prompt("Edit title:", notes[index].title);
      const newContent = prompt("Edit content:", notes[index].content);

      if (newContent && newContent.trim()) {
        notes[index].title = newTitle;
        notes[index].content = newContent;
        saveNotes();
        displayNotes();
      }
    }

    function downloadNote(index) {
      const note = notes[index];
      const fileName =
        (note.title ? note.title.replace(/\s+/g, "_") : "note_" + note.date) + ".txt";

      const blob = new Blob([note.content], { type: "text/plain" });
      const link = document.createElement("a");

      link.href = URL.createObjectURL(blob);
      link.download = fileName;
      link.click();

      URL.revokeObjectURL(link.href);
    }

    displayNotes();
  </script>

</body>
</html>
